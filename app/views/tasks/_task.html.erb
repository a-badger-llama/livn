<div id="<%= dom_id(task) %>" class="flex hover:bg-neutral-800">
  <%= form_with(model: task, class: "flex flex-grow p-1", data: { controller: "task" }) do |form| %>
    <%= form.check_box :completed, class: "m-1 rounded-full bg-transparent border-1", data: { task_target: "completed", action: "input->task#autoSave" } %>

    <div class="flex flex-grow flex-col" data-action="focusin->task#display focusout->task#hide">
      <%= form.text_field :title, class: "bg-transparent border-none ring-0 placeholder-white p-0", placeholder: "Title", data: { task_target: "title", action: "input->task#autoSave" } %>
      <%= form.text_area :description, class: class_names("text-sm bg-transparent border-none ring-0 placeholder-white p-0 resize-none h-6", hidden: !task.description?), rows: 1, placeholder: "Description", data: { task_target: "description display", action: "input->task#autoSave" } %>

      <div class="flex">
        <%= form.date_field :due_date, class: class_names("bg-transparent border-none ring-0 placeholder-white p-0", hidden: !task.due_date), data: { task_target: "dueDate display", action: "input->task#autoSave" } %>
        <%= form.time_field :due_time, class: class_names("bg-transparent border-none ring-0 placeholder-white p-0", hidden: !task.due_time), data: { task_target: "dueTime display", action: "input->task#autoSave" } %>
      </div>
    </div>
  <% end %>

  <div class="relative flex items-center" data-controller="dropdown">
    <span class="px-2 py-1 cursor-pointer rounded-lg hover:bg-gray-900" data-action="click->dropdown#toggle click@window->dropdown#hide">
      &#x22EE; <!-- Three vertical dots -->
    </span>

    <div class="hidden flex flex-col absolute right-0 top-10 z-10 rounded-lg py-2 bg-gray-700 border border-gray-700"
         data-dropdown-target="menu"
         data-transition-enter="transition ease-out duration-200"
         data-transition-enter-from="opacity-0 translate-y-1"
         data-transition-enter-to="opacity-100 translate-y-0"
         data-transition-leave="transition ease-in duration-150"
         data-transition-leave-from="opacity-100 translate-y-0"
         data-transition-leave-to="opacity-0 translate-y-1">
      <%= link_to "Edit", edit_task_path(task), class: "px-8 py-2 text-white hover:bg-neutral-800" %>
      <%= link_to "Delete", task_path(task), method: :delete, data: { confirm: "Are you sure?" }, class: "px-8 py-2 text-white hover:bg-neutral-800" %>
    </div>
  </div>
</div>
